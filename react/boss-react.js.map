{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./react/boss.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","BossApp","interval","breakCondition","paramToTransfer","Promise","resolve","setTimeout","wait","greetAnchor","config","city","skipCompany","maxAge","maxWorkAge","minWorkAge","minSalary","universityFilter","exp","getElementsByClassName","skipCompanyStr","JSON","parse","innerText","indexOf","nextElementSibling","university","reduce","childNodes","a","b","trim","nodeType","textContent","split","length","majorArray","passMajor","uniArray","passUni","labelText","currentAge","substr","workAge","currentSalarySpan","currentSalaryStr","currentSalary","jobIndex","jobRequest","XMLHttpRequest","reject","onreadystatechange","readyState","DONE","status","ret","response","doc","document","createElement","innerHTML","html","dataset","jobid","onerror","open","send","chrome","storage","local","keyArray","forEach","item","geekUrl","getGeekHttpRequest","that","this","greet","closest","filterCv","push","greetElement","param","uid","jid","expect","lid","btnGreetHttpRequest","setRequestHeader","rescode","_this","loadCity","then","loadConfig","message","getJob","_ref","_ref2","_slicedToArray","jobId","runtime","sendMessage","msg","totalPage","alert","promiseArray","getGeek","all","greetArray","concat","map","uidArray","uidCollection","tmp","communicate","querySelectorAll","values","classList","click","waiter","undefined","getElementsByTagName","cur","chatContainer","chatMessage","btnSend","mainList","_loop","li","clickA","keys","err","console","log","finally","process"],"mappings":"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","file":"./react/boss-react.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","class BossApp {\n\n    static message;\n    static city;\n\n    static waiter(interval, breakCondition, paramToTransfer) {\n        if (!interval) {\n            interval = 1000;\n        }\n        return new Promise(function (resolve) {\n            setTimeout(wait, 1000);\n\n            function wait() {\n                if (breakCondition()) {\n                    return resolve(paramToTransfer);\n                } else {\n                    setTimeout(wait, interval)\n                }\n            };\n        });\n    }\n\n\n    static filterCv(greetAnchor, config, city) {\n        let maxAge = config['max-age-' + city] || 100;\n        let maxWorkAge = config['max-exp-' + city] || 100;\n        let minWorkAge = config['min-exp-' + city] || 0;\n        let minSalary = config['min-salary-' + city] || 0;\n        let universityFilter = config['uni-filter-' + city];\n\n        //取到现在的公司\n        let exp = greetAnchor.getElementsByClassName('experience')[0];\n        let skipCompanyStr = config['company' + \"-\" + city];\n        let skipCompany;\n        if (skipCompanyStr) {\n            skipCompany = JSON.parse(skipCompanyStr);\n        }\n        if (exp && skipCompany) {\n            for (let c in skipCompany) {\n                if (exp.innerText.indexOf(skipCompany[c]) > -1) {\n                    return false;\n                }\n            }\n        }\n        if (universityFilter) {\n            if (exp.nextElementSibling) {\n                let university = [].reduce.call(exp.nextElementSibling.childNodes, function (a, b) {\n                    return a.trim() + (b.nodeType === 3 ? b.textContent : '');\n                }, '').split(\" \");\n                //包含了专业,university 例子：[\"西北大学\", \"软件工程\"]\n                if (university.length > 1) {\n                    let majorArray = ['计算机', '软件', '电子', '信息', '自动化', '通信', '控制'];\n                    let passMajor = false;\n                    for (let i = 0; i < majorArray.length; ++i) {\n                        if (university[1].indexOf(majorArray[i]) > -1) {\n                            passMajor = true;\n                            break;\n                        }\n                    }\n                    if (!passMajor) {\n                        return false;\n                    }\n                }\n                let uniArray = ['清华', '北大', '北航', '北京航空航天', '北京理工', '北京师范', '北京邮电', '中国人民大学',\"哈工大\"\n                    , '哈尔滨工业', '吉林大学', '东北大学', '东北师范', '大连理工', '西安交通大学', '西北工业', '湖南大学', '中南大学'\n                    , '西安电子科技', '电子科技', '四川大学', '重庆大学', '重庆邮电', '北京科技', '北京交通', '武汉大学', '华中科技', '武汉理工'\n                    , '复旦', '南开', '天津大学', '南京大学', '东南大学', '厦门大学', '中山大学', '华南理工', '浙江大学', '上海交通大学', '同济']\n                let passUni = false;\n                for (let i = 0; i < uniArray.length; ++i) {\n                    if (university[0].indexOf(uniArray[i]) > -1) {\n                        passUni = true;\n                        break;\n                    }\n                }\n                if (!passUni) {\n                    return false;\n                }\n            } else {\n                return false;\n            }\n        }\n\n\n        let labelText = greetAnchor.getElementsByClassName('label-text');\n        let currentAge = labelText[3].textContent.substr(0, labelText[3].textContent.length - 1);\n        let workAge = labelText[1].textContent.substr(0, labelText[1].textContent.length - 1);\n        //取到待遇\n        let currentSalarySpan = greetAnchor.getElementsByClassName('badge-salary')[0].textContent;\n        if (currentSalarySpan.indexOf(\"-\") == -1) {\n            return false;\n        }\n\n        let currentSalaryStr = currentSalarySpan.split(\"-\")[0];\n        let currentSalary = currentSalaryStr.substr(0, currentSalaryStr.length - 1);\n\n        return (!maxAge || maxAge >= currentAge) && (!minWorkAge || minWorkAge <= workAge)\n            && (!maxWorkAge || maxWorkAge >= workAge) && (!minSalary || currentSalary >= minSalary);\n\n    }\n\n\n    static getJob(config, city) {\n        let jobIndex = config['job-index-' + city];\n        let jobRequest = new XMLHttpRequest();\n        let url = 'https://www.zhipin.com/bossweb/joblist/data.json?' +\n            'page=1&type=0&status=0&_=1543980515163';\n        return new Promise((resolve, reject) => {\n            jobRequest.onreadystatechange = () => {\n                if (jobRequest.readyState === XMLHttpRequest.DONE) {\n                    if (jobRequest.status == 200) {\n                        let ret = JSON.parse(jobRequest.response);\n                        let doc = document.createElement(\"div\");\n                        doc.innerHTML = ret.html;\n                        resolve([doc.getElementsByClassName('link-recommend')[jobIndex - 1].dataset.jobid\n                            , config]);\n\n                    } else {\n                        reject(\"http status in get job\");\n                    }\n                }\n            }\n            jobRequest.onerror = () => reject(\"http error in get job \");\n            jobRequest.open(\"GET\", url, true);\n            jobRequest.send();\n        });\n    }\n\n    static loadCity() {\n        return new Promise((resolve => {\n            chrome.storage.local.get(\"city\", resolve);\n        }));\n    }\n\n    static loadConfig(city) {\n        let keyArray = ['salary', 'experience', 'degree', 'max-age', 'min-exp', 'max-exp'\n            , 'min-salary', 'job-index', 'page-count', 'company', 'message', 'uni-filter'];\n        keyArray.forEach((item, i, t) => t[i] = item + \"-\" + city);\n        return new Promise((resolve => chrome.storage.local.get(keyArray, resolve)));\n    }\n\n    static getGeek(geekUrl, config, city) {\n        let getGeekHttpRequest = new XMLHttpRequest();\n        let that = this;\n        return new Promise(resolve => {\n            getGeekHttpRequest.onreadystatechange = function () {\n                if (getGeekHttpRequest.readyState == XMLHttpRequest.DONE\n                    && getGeekHttpRequest.status == 200) {\n                    let response = JSON.parse(getGeekHttpRequest.response);\n                    if (response[\"hasMore\"]) {\n                        let doc = document.createElement(\"div\");\n                        doc.innerHTML = response[\"htmlList\"];\n                        //取到所有的待打招呼的节点\n                        let greet = doc.getElementsByClassName('btn-greet');\n                        let ret = []\n                        for (let n = 0; n < greet.length; ++n) {\n                            let a = greet[n].closest('.sider-op').nextElementSibling;\n                            if (!that.filterCv(a, config, city)) {\n                                continue;\n                            }\n                            ret.push(a);\n                        }\n                        resolve(ret);\n                    } else {\n                        resolve([]);\n                    }\n                }\n            }\n            getGeekHttpRequest.onerror = () => resolve([])\n            getGeekHttpRequest.open(\"GET\", geekUrl, true);\n            getGeekHttpRequest.send();\n        });\n    }\n\n    static greet(greetElement) {\n        let btnGreetUrl = \"https://www.zhipin.com/chat/batchAddRelation.json\";\n        //记录下多少人成功的打招呼了\n        let param = 'gids=' + greetElement.dataset.uid + \"&jids=\" + greetElement.dataset.jid\n            + '&expectIds=' + greetElement.dataset.expect + \"&lids=\" + greetElement.dataset.lid;\n\n\n        let btnGreetHttpRequest = new XMLHttpRequest();\n        btnGreetHttpRequest.open(\"POST\", btnGreetUrl, false);\n        btnGreetHttpRequest.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\n        return new Promise((resolve, reject) => {\n            btnGreetHttpRequest.onreadystatechange = () => {\n                if (btnGreetHttpRequest.readyState === XMLHttpRequest.DONE) {\n                    if (btnGreetHttpRequest.status === 200) {\n                        let btnGreetResponse = JSON.parse(btnGreetHttpRequest.response);\n                        if (btnGreetResponse.rescode == 1) {\n                            resolve(greetElement.dataset.uid);\n                        } else {\n                            reject(\"rescode not equal 1\")\n                        }\n\n                    } else {\n                        reject(\"http error in greet\")\n                    }\n                }\n            }\n            btnGreetHttpRequest.onerror = () => reject(\"http error in greet\")\n            btnGreetHttpRequest.send(param);\n        })\n    }\n\n    static process() {\n        let that = this;\n        this.loadCity().then((ret) => {\n            this.city = ret.city || 0;\n            return this.loadConfig(this.city);\n        }).then((config) => {\n            this.message = config['message-' + this.city];\n            return this.getJob(config, this.city)\n        }).then(([jobId, config]) => {\n            chrome.runtime.sendMessage({\"msg\": \"获取职位完成\"});\n            let totalPage = config['page-count-' + this.city]\n            if (!totalPage) {\n                alert(\"没有设置候选人页数，默认是1\");\n                totalPage = 1;\n            }\n            let promiseArray = [];\n            let geekUrl = 'https://www.zhipin.com/boss/recommend/geeks.json?status=0&jobid=' + jobId\n                + '&salary=' + (config['salary' + \"-\" + this.city] || 0) + '&experience=' +\n                (config['experience' + \"-\" + this.city] || 0) +\n                '&degree=' + (config['degree' + \"-\" + this.city] || 0) + '&page=';\n\n            for (let m = 1; m <= totalPage; ++m) {\n                promiseArray.push(this.getGeek(geekUrl + m, config, this.city))\n            }\n            return Promise.all(promiseArray);\n        }).then((t) => {\n            chrome.runtime.sendMessage({\"msg\": \"获取候选人完成\"});\n            let greetArray = [];\n            for (let i = 0; i < t.length; ++i) {\n                if (t[i].length > 0) {\n                    greetArray = greetArray.concat(t[i]);\n                }\n            }\n            if (greetArray.length === 0) {\n                alert(\"没有合适的候选人了\");\n                return Promise.reject(\"empty\");\n            }\n\n            return greetArray;\n\n        }).then(\n            (greetArray) => {\n                let p = greetArray.map((value) => {\n                    return that.greet(value);\n                })\n                return Promise.all(p);\n            }\n        ).then((uidArray) => {\n            chrome.runtime.sendMessage({\"msg\": \"打招呼完成\"});\n            let uidCollection = {};\n            uidArray.forEach((value) => {\n                uidCollection[value] = 1;\n            });\n            let communicate = document.querySelectorAll(\"[ka='menu-im']\")[0];\n            if (Object.values(communicate.closest('.menu-chat').classList)\n                    .indexOf(\"cur\") == -1) {\n                communicate.click();\n            }\n            return this.waiter(1000,\n                (function () {\n                    let tmp = undefined;\n                    return function () {\n                        if (Object.values(communicate.closest('.menu-chat').classList)\n                                .indexOf(\"cur\") > -1) {\n                            if (tmp === undefined) {\n                                tmp = document.getElementsByClassName('main-list')[0]\n                                    .getElementsByTagName('li')[0].getElementsByTagName('a')[0]\n                                    .dataset.uid;\n                                return false;\n                            }\n\n                            let cur = document.getElementsByClassName('main-list')[0]\n                                .getElementsByTagName('li')[0].getElementsByTagName('a')[0]\n                                .dataset.uid;\n                            if (cur === tmp) {\n                                return true;\n                            }\n                            tmp = cur;\n                            return false;\n                        } else {\n                            return false;\n                        }\n                    }\n                })()\n                , uidCollection);\n        }).then((uidCollection) => {\n            chrome.runtime.sendMessage({\"msg\": \"正在发送常用语...\"});\n            let chatContainer = document.getElementsByClassName('chat-container')[0];\n            let chatMessage = chatContainer.getElementsByClassName('chat-message')[0];\n            let btnSend = chatContainer.getElementsByClassName('btn-send')[0];\n            let mainList = document.getElementsByClassName('main-list')[0]\n                .getElementsByTagName('li');\n\n            let p = Promise.resolve();\n\n            for (let i = 0; i < Object.keys(uidCollection).length; ++i) {\n                p = p.then(() => {\n                    let li = mainList[i];\n                    let clickA = li.getElementsByTagName('a')[0];\n                    if (uidCollection.hasOwnProperty(clickA.dataset.uid)) {\n                        delete uidCollection[clickA.dataset.uid];\n                        clickA.click();\n                        return this.waiter(1000, () => Object.values(li.classList).indexOf(\"cur\") > -1)\n                            .then(() => {\n                                    chatMessage.textContent = this.message;\n                                    btnSend.click();\n                                    return new Promise(resolve => {\n                                        setTimeout(resolve, 1000);\n                                    })\n                                }\n                            );\n                    }\n                    return Promise.resolve();\n                })\n            }\n            return p;\n        }).then(null, (err) => {\n            console.log(err);\n        }).finally(() => {\n            chrome.runtime.sendMessage({\"msg\": \"success\"});\n        });\n    }\n}\n\nBossApp.process();\n\n"],"sourceRoot":""}